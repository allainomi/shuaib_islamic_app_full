name: Generate Artifacts

on:
  push:
    branches: [ main ]

jobs:
  create-artifacts:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Create Simple Artifacts
      run: |
        # 1. Basic project info
        echo "ðŸ”„ PROJECT ANALYSIS" > project-info.txt
        echo "==================" >> project-info.txt
        echo "Analysis time: $(date)" >> project-info.txt
        echo "Repository: shuaib_islamic_app_full" >> project-info.txt
        echo "Branch: main" >> project-info.txt
        
        # 2. File structure
        echo "" >> project-info.txt
        echo "ðŸ“ FILE STRUCTURE" >> project-info.txt
        echo "================" >> project-info.txt
        ls -la >> project-info.txt
        
        # 3. File counts
        echo "" >> project-info.txt
        echo "ðŸ“Š FILE COUNTS" >> project-info.txt
        echo "==============" >> project-info.txt
        echo "Total files: $(find . -type f | wc -l)" >> project-info.txt
        echo "Dart files: $(find . -name "*.dart" | wc -l)" >> project-info.txt
        echo "XML files: $(find . -name "*.xml" | wc -l)" >> project-info.txt
        echo "YAML files: $(find . -name "*.yaml" -o -name "*.yml" | wc -l)" >> project-info.txt
        
        # 4. Create a test file
        echo "This is a test artifact file" > test-file.txt
        echo "Created at: $(date)" >> test-file.txt
        
        echo "âœ… Artifacts created successfully!"
        
    - name: Upload Artifacts
      uses: actions/upload-artifact@v4
      with:
        name: my-artifacts
        path: |
          project-info.txt
          test-file.txt
        retention-days: 30
        
    - name: Upload Complete Project
      uses: actions/upload-artifact@v4
      with:
        name: complete-project
        path: .
        retention-days: 5
