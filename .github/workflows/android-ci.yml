name: Validate Project

on:
  push:
    branches: [ main, develop ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Analyze Project
      run: |
        echo "ğŸ” Project Analysis Report"
        echo "=========================="
        
        # Check critical files
        echo ""
        echo "ğŸ“‹ Critical Files Check:"
        [ -f "build.gradle" ] || [ -f "build.gradle.kts" ] && echo "âœ… Root build.gradle found" || echo "âŒ Root build.gradle missing"
        [ -f "settings.gradle" ] || [ -f "settings.gradle.kts" ] && echo "âœ… settings.gradle found" || echo "âŒ settings.gradle missing"
        [ -d "app" ] && echo "âœ… app directory found" || echo "âŒ app directory missing"
        [ -f "app/build.gradle" ] || [ -f "app/build.gradle.kts" ] && echo "âœ… app/build.gradle found" || echo "âŒ app/build.gradle missing"
        
        echo ""
        echo "ğŸ“ Complete File Structure:"
        find . -type f -name "*.gradle*" -o -name "*.java" -o -name "*.kt" -o -name "AndroidManifest.xml" | sort
        
        echo ""
        echo "ğŸ“Š Statistics:"
        echo "Java files: $(find . -name "*.java" | wc -l)"
        echo "Kotlin files: $(find . -name "*.kt" | wc -l)"
        echo "XML files: $(find . -name "*.xml" | wc -l)"
        
    - name: Basic Gradle Check
      run: |
        echo "ğŸ› ï¸ Testing Gradle..."
        if [ -f "gradlew" ]; then
          chmod +x gradlew
          ./gradlew tasks --all || echo "Gradle tasks failed but continuing..."
        else
          echo "No gradlew found, using system gradle"
          gradle tasks --all || echo "System gradle not available"
        fi
